<?php
// -------------------------
// db.php
// ไฟล์นี้ใช้สำหรับเชื่อมต่อฐานข้อมูล MySQL
// ไฟล์นี้จะถูกเรียกใช้ในหน้าอื่นๆ ที่ต้องใช้ฐานข้อมูล
// -------------------------

// กำหนดค่าการเชื่อมต่อฐานข้อมูล
$host = 'localhost';    // ชื่อโฮสต์ของฐานข้อมูล (ปกติจะเป็น localhost สำหรับ XAMPP)
$user = 'root';         // ชื่อผู้ใช้ฐานข้อมูล (XAMPP ใช้ root เป็นค่าเริ่มต้น)
$pass = '';             // รหัสผ่านฐานข้อมูล (XAMPP ไม่มีรหัสผ่านเป็นค่าเริ่มต้น)
$dbname = 'testdb';     // ชื่อฐานข้อมูลที่จะใช้งาน

// สร้างการเชื่อมต่อฐานข้อมูลโดยใช้ MySQLi
// MySQLi เป็น extension ใหม่ที่ปลอดภัยกว่า MySQL แบบเก่า
// รองรับ prepared statements ที่ป้องกัน SQL injection ได้ดี
$conn = new mysqli($host, $user, $pass, $dbname);

// ตรวจสอบการเชื่อมต่อ
if ($conn->connect_error) {
    // หากเชื่อมต่อไม่สำเร็จ ให้หยุดการทำงานและแสดงข้อความผิดพลาด
    // die() จะหยุดการทำงานของสคริปต์ทันที
    die("Connection failed: " . $conn->connect_error);
}

// หากเชื่อมต่อสำเร็จ ตัวแปร $conn จะพร้อมใช้งาน
// ไม่ต้องปิดการเชื่อมต่อในไฟล์นี้ เพราะจะปิดอัตโนมัติเมื่อสคริปต์จบการทำงาน

?>